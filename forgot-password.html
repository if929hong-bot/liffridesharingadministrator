<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>忘記密碼 - 帳號安全中心</title>
  <!-- 引入外部資源 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            neutral: {
              100: '#F5F7FA',
              200: '#E5E6EB',
              300: '#C9CDD4',
              400: '#86909C',
              500: '#4E5969',
              600: '#272E3B',
              700: '#1D2129',
            },
            success: '#52C41A',
            warning: '#FAAD14',
            danger: '#FF4D4F',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
          boxShadow: {
            'card': '0 10px 30px -5px rgba(0, 0, 0, 0.1)',
            'card-hover': '0 20px 40px -5px rgba(0, 0, 0, 0.15)',
          }
        },
      }
    }
  </script>
  
  <!-- 自定義工具類 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .input-focus {
        @apply ring-2 ring-primary/50 border-primary outline-none;
      }
      .btn-primary {
        @apply bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg hover:shadow-xl flex items-center justify-center gap-2;
      }
      .btn-outline {
        @apply border border-neutral-200 hover:border-primary hover:text-primary font-medium py-3 px-6 rounded-lg transition-all duration-300;
      }
      .form-input {
        @apply w-full px-4 py-3 rounded-lg border border-neutral-200 focus:input-focus transition-all duration-300 text-neutral-700 placeholder-neutral-400;
      }
      .form-label {
        @apply block text-neutral-700 font-medium mb-2 text-sm;
      }
      .form-group {
        @apply mb-5;
      }
      .animate-fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      .animate-slide-up {
        animation: slideUp 0.5s ease-out;
      }
      .animate-pulse-light {
        animation: pulseLight 2s infinite;
      }
    }
    
    /* 全局動畫定義 */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    @keyframes pulseLight {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
  </style>
</head>
<body class="font-inter bg-gradient-to-br from-neutral-100 to-white min-h-screen flex items-center justify-center p-4 md:p-8">
  <!-- 頁面容器 -->
  <div class="w-full max-w-md">
    <!-- 成功提示框 (預設隱藏) -->
    <div id="successAlert" class="hidden bg-success/10 border border-success/30 text-success rounded-xl p-5 mb-6 animate-fade-in">
      <div class="flex items-start gap-3">
        <i class="fa fa-check-circle text-xl mt-0.5"></i>
        <div>
          <h3 class="font-semibold text-lg mb-1">發送成功！</h3>
          <p class="text-sm text-success/80">我們已將密碼重置連結寄送到您的註冊信箱，請在 24 小時內點擊連結完成重置。</p>
        </div>
      </div>
    </div>
    
    <!-- 表單卡片 -->
    <div id="formCard" class="bg-white rounded-2xl shadow-card hover:shadow-card-hover transition-all duration-500 p-6 md:p-8 animate-slide-up">
      <!-- 標題區域 -->
      <div class="text-center mb-8">
        <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fa fa-lock text-primary text-2xl"></i>
        </div>
        <h1 class="text-[clamp(1.5rem,3vw,1.8rem)] font-bold text-neutral-700 mb-2">忘記密碼</h1>
        <p class="text-neutral-500 text-sm">請輸入您的帳號資訊，我們將寄發密碼重置連結到您的註冊信箱</p>
      </div>
      
      <!-- 表單 -->
      <form id="forgotPasswordForm" class="space-y-1">
        <!-- 帳號輸入框 -->
        <div class="form-group">
          <label for="username" class="form-label">帳號</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400">
              <i class="fa fa-user"></i>
            </span>
            <input 
              type="text" 
              id="username" 
              name="username" 
              class="form-input pl-10" 
              placeholder="請輸入您的帳號"
              required
            >
            <span id="usernameError" class="hidden absolute right-3 top-1/2 -translate-y-1/2 text-danger">
              <i class="fa fa-exclamation-circle"></i>
            </span>
          </div>
          <p id="usernameErrorMessage" class="hidden text-danger text-xs mt-1"></p>
        </div>
        
        <!-- 註冊信箱輸入框 -->
        <div class="form-group">
          <label for="email" class="form-label">註冊信箱</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400">
              <i class="fa fa-envelope"></i>
            </span>
            <input 
              type="email" 
              id="email" 
              name="email" 
              class="form-input pl-10" 
              placeholder="請輸入您的註冊信箱"
              required
            >
            <span id="emailError" class="hidden absolute right-3 top-1/2 -translate-y-1/2 text-danger">
              <i class="fa fa-exclamation-circle"></i>
            </span>
          </div>
          <p id="emailErrorMessage" class="hidden text-danger text-xs mt-1"></p>
        </div>
        
        <!-- 連絡電話輸入框 -->
        <div class="form-group">
          <label for="phone" class="form-label">連絡電話</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400">
              <i class="fa fa-phone"></i>
            </span>
            <input 
              type="tel" 
              id="phone" 
              name="phone" 
              class="form-input pl-10" 
              placeholder="請輸入您的連絡電話"
              required
            >
            <span id="phoneError" class="hidden absolute right-3 top-1/2 -translate-y-1/2 text-danger">
              <i class="fa fa-exclamation-circle"></i>
            </span>
          </div>
          <p id="phoneErrorMessage" class="hidden text-danger text-xs mt-1"></p>
        </div>
        
        <!-- 安全提示 -->
        <div class="bg-neutral-100 rounded-lg p-3 mb-6">
          <p class="text-neutral-500 text-xs flex items-start gap-2">
            <i class="fa fa-info-circle text-primary mt-0.5"></i>
            <span>密碼重置連結有效期為 24 小時，若未收到郵件，請檢查垃圾郵件資料夾或聯絡客服。</span>
          </p>
        </div>
        
        <!-- 按鈕區域 -->
        <div class="space-y-3 mt-4">
          <button 
            type="submit" 
            id="submitBtn" 
            class="btn-primary w-full"
          >
            <i class="fa fa-paper-plane"></i>
            <span>發送重置連結</span>
          </button>
          
          <div class="flex justify-center">
            <a href="login.html" class="text-primary hover:text-primary/80 text-sm font-medium transition-colors duration-300">
              想起密碼了？返回登入
            </a>
          </div>
        </div>
      </form>
    </div>
    
    <!-- 頁腳 -->
    <div class="text-center mt-6 text-neutral-400 text-xs">
      <p>© 2025 您的公司名稱. 保留所有權利.</p>
      <div class="flex justify-center gap-4 mt-2">
        <a href="#" class="hover:text-primary transition-colors duration-300">服務條款</a>
        <a href="#" class="hover:text-primary transition-colors duration-300">隱私政策</a>
        <a href="#" class="hover:text-primary transition-colors duration-300">聯絡我們</a>
      </div>
    </div>
  </div>
  
  <!-- JavaScript 表單驗證與處理 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('forgotPasswordForm');
      const successAlert = document.getElementById('successAlert');
      const formCard = document.getElementById('formCard');
      const submitBtn = document.getElementById('submitBtn');
      
      // 表單欄位與錯誤元素
      const fields = [
        {
          id: 'username',
          errorElement: document.getElementById('usernameError'),
          errorMessageElement: document.getElementById('usernameErrorMessage'),
          validator: (value) => value.trim() !== '' ? '' : '請輸入您的帳號'
        },
        {
          id: 'email',
          errorElement: document.getElementById('emailError'),
          errorMessageElement: document.getElementById('emailErrorMessage'),
          validator: (value) => {
            if (value.trim() === '') return '請輸入您的註冊信箱';
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(value) ? '' : '請輸入有效的電子信箱格式';
          }
        },
        {
          id: 'phone',
          errorElement: document.getElementById('phoneError'),
          errorMessageElement: document.getElementById('phoneErrorMessage'),
          validator: (value) => {
            if (value.trim() === '') return '請輸入您的連絡電話';
            const phoneRegex = /^[0-9\-\+\s\(\)]{8,20}$/;
            return phoneRegex.test(value) ? '' : '請輸入有效的連絡電話';
          }
        }
      ];
      
      // 即時驗證
      fields.forEach(field => {
        const input = document.getElementById(field.id);
        input.addEventListener('input', function() {
          validateField(field);
        });
        
        input.addEventListener('blur', function() {
          validateField(field, true);
        });
      });
      
      // 表單提交處理
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // 驗證所有欄位
        let isValid = true;
        fields.forEach(field => {
          if (validateField(field, true) !== '') {
            isValid = false;
          }
        });
        
        if (isValid) {
          // 模擬表單提交
          submitBtn.disabled = true;
          submitBtn.innerHTML = '<i class="fa fa-spinner fa-spin"></i><span>發送中...</span>';
          
          // 模擬 API 請求延遲
          setTimeout(() => {
            // 顯示成功提示，隱藏表單
            successAlert.classList.remove('hidden');
            formCard.classList.add('hidden');
            
            // 重置按鈕狀態（實際專案中可省略）
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fa fa-paper-plane"></i><span>發送重置連結</span>';
            
            // 這裡應該發送表單數據到後端 API
            const formData = {
              username: document.getElementById('username').value.trim(),
              email: document.getElementById('email').value.trim(),
              phone: document.getElementById('phone').value.trim()
            };
            
            console.log('表單數據:', formData);
            // 真實環境中使用 fetch 或 axios 發送請求
            /*
            fetch('/api/forgot-password', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                successAlert.classList.remove('hidden');
                formCard.classList.add('hidden');
              } else {
                // 處理錯誤
                alert(data.message || '發送失敗，請稍後再試');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fa fa-paper-plane"></i><span>發送重置連結</span>';
              }
            })
            .catch(error => {
              console.error('錯誤:', error);
              alert('網絡錯誤，請稍後再試');
              submitBtn.disabled = false;
              submitBtn.innerHTML = '<i class="fa fa-paper-plane"></i><span>發送重置連結</span>';
            });
            */
          }, 1500);
        }
      });
      
      // 驗證單個欄位
      function validateField(field, showError = false) {
        const input = document.getElementById(field.id);
        const value = input.value.trim();
        const errorMessage = field.validator(value);
        
        if (errorMessage) {
          if (showError || input.dataset.touched === 'true') {
            field.errorElement.classList.remove('hidden');
            field.errorMessageElement.classList.remove('hidden');
            field.errorMessageElement.textContent = errorMessage;
            input.classList.add('border-danger');
            input.classList.remove('border-success');
          }
          input.dataset.touched = 'true';
          return errorMessage;
        } else {
          field.errorElement.classList.add('hidden');
          field.errorMessageElement.classList.add('hidden');
          input.classList.remove('border-danger');
          input.classList.add('border-success');
          input.dataset.touched = 'true';
          return '';
        }
      }
    });
  </script>
</body>
</html>