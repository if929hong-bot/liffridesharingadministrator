<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>搭車自由 - 司機入口</title>
  <!-- 引入 Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入 Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 自定義配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#00A86B', // 綠色主色
            secondary: '#F5F5F5', // 淺灰色背景
            dark: '#333333', // 深灰色文字
          },
          fontFamily: {
            sans: ['Helvetica Neue', 'Arial', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .btn-primary {
        @apply bg-primary text-white py-3 px-6 rounded-lg font-medium transition-all duration-300 hover:bg-primary/90 active:scale-95 shadow-md;
      }
      .btn-secondary {
        @apply bg-white text-primary border border-primary py-3 px-6 rounded-lg font-medium transition-all duration-300 hover:bg-gray-50 active:scale-95;
      }
      .input-field {
        @apply w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all;
      }
      .card {
        @apply bg-white rounded-xl shadow-md p-6 transition-all duration-300 hover:shadow-lg;
      }
      .file-upload {
        @apply w-full border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer;
      }
      .radio-group {
        @apply flex space-x-6;
      }
      .radio-label {
        @apply flex items-center space-x-2 cursor-pointer;
      }
      .modal {
        @apply fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden;
      }
      .modal-content {
        @apply bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center;
      }
    }
  </style>
</head>
<body class="bg-gray-50 font-sans text-dark min-h-screen">
  <!-- 頂部導航欄 -->
  <header class="bg-white shadow-sm fixed top-0 left-0 right-0 z-50">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-car text-primary text-2xl"></i>
        <h1 class="text-xl font-bold">搭車自由</h1>
      </div>
      <nav class="hidden md:flex space-x-6">
        <a href="passenger.html" class="text-gray-600 hover:text-primary transition-colors">乘客</a>
        <button class="text-primary font-medium">司機</button>
        <a href="admin.html" class="text-gray-600 hover:text-primary transition-colors">管理員</a>
      </nav>
      <button id="mobile-menu-btn" class="md:hidden text-dark">
        <i class="fa fa-bars text-xl"></i>
      </button>
    </div>
    <!-- 手機導航菜單 -->
    <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg absolute w-full">
      <div class="container mx-auto px-4 py-2 flex flex-col space-y-3">
        <a href="passenger.html" class="text-gray-600 hover:text-primary transition-colors py-2 border-b border-gray-100">乘客</a>
        <button class="text-primary font-medium py-2 border-b border-gray-100">司機</button>
        <a href="admin.html" class="text-gray-600 hover:text-primary transition-colors py-2">管理員</a>
      </div>
    </div>
  </header>

  <!-- 主要內容區域 -->
  <main class="container mx-auto px-4 pt-24 pb-16">
    <!-- 司機介面 -->
    <section class="block">
      <div class="max-w-md mx-auto">
        <div class="card">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">司機入口</h2>
            <div class="flex space-x-2">
              <button id="driver-login-tab" class="text-primary font-medium border-b-2 border-primary pb-1">登錄</button>
              <button id="driver-register-tab" class="text-gray-500 hover:text-primary transition-colors pb-1">註冊</button>
            </div>
          </div>
          
          <!-- 司機登錄表單 -->
          <div id="driver-login-form">
            <div class="space-y-4 mb-6">
              <div>
                <label class="block text-left text-sm font-medium text-gray-700 mb-1">帳號 (手機號碼)</label>
                <input type="tel" class="input-field" placeholder="輸入手機號碼" required>
              </div>
              <div>
                <label class="block text-left text-sm font-medium text-gray-700 mb-1">密碼</label>
                <input type="password" class="input-field" placeholder="輸入密碼" required>
              </div>
              <div class="text-right">
                <a href="#" class="text-primary text-sm hover:underline">忘記密碼？</a>
              </div>
            </div>
            <button class="btn-primary w-full">登錄</button>
          </div>
          
          <!-- 司機註冊表單 - 提交後直接跳轉 driver/driver-audit.html -->
          <form id="driver-register-form" class="hidden" enctype="multipart/form-data">
            <div class="space-y-6 mb-6">
              <!-- 基本資訊 -->
              <div class="border-b border-gray-100 pb-4">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">基本資訊</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">姓名</label>
                    <input type="text" class="input-field" name="driver-name" placeholder="輸入真實姓名" required>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">手機號碼</label>
                    <input type="tel" class="input-field" name="driver-phone" placeholder="輸入手機號碼" required>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">目前職業</label>
                    <input type="text" class="input-field" name="driver-job" placeholder="輸入您的目前職業" required>
                  </div>
                  <!-- 新增車隊名稱欄位 -->
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">車隊名稱</label>
                    <input type="text" class="input-field" name="fleet-name" placeholder="輸入所屬車隊名稱（無車隊可填寫「個人」）" required>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">車牌號碼</label>
                    <input type="text" class="input-field" name="car-license" placeholder="輸入車牌號碼" required>
                  </div>
                </div>
              </div>
              
              <!-- 駕駛經驗 -->
              <div class="border-b border-gray-100 pb-4">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">駕駛經驗</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-2">有無搭車服務經驗？</label>
                    <div class="radio-group">
                      <label class="radio-label">
                        <input type="radio" name="driving-experience" value="yes" class="text-primary focus:ring-primary" required>
                        <span>有</span>
                      </label>
                      <label class="radio-label">
                        <input type="radio" name="driving-experience" value="no" class="text-primary focus:ring-primary">
                        <span>無</span>
                      </label>
                    </div>
                  </div>
                  <div id="fleet-history-container" class="hidden">
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">曾經服務的車隊</label>
                    <textarea class="input-field h-24" name="fleet-history" placeholder="請列出曾經服務過的車隊名稱，多個請用逗號分隔"></textarea>
                  </div>
                </div>
              </div>
              
              <!-- 背景調查 -->
              <div class="border-b border-gray-100 pb-4">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">背景調查</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-2">有無犯罪前科？</label>
                    <div class="radio-group">
                      <label class="radio-label">
                        <input type="radio" name="criminal-record" value="yes" class="text-primary focus:ring-primary" required>
                        <span>有</span>
                      </label>
                      <label class="radio-label">
                        <input type="radio" name="criminal-record" value="no" class="text-primary focus:ring-primary">
                        <span>無</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-2">良民證上傳</label>
                    <label class="file-upload">
                      <input type="file" class="hidden" name="good-citizen-doc" accept="image/*" required>
                      <div>
                        <p class="text-gray-600 mb-1">點擊或拖動文件到這裡上傳</p>
                        <p class="text-gray-400 text-xs">支援 JPG、PNG 格式，檔案大小不超過 5MB</p>
                      </div>
                    </label>
                  </div>
                </div>
              </div>
              
              <!-- 車輛資訊 -->
              <div class="border-b border-gray-100 pb-4">
                <h3 class="text-lg font-semibold mb-4 text-gray-800">車輛資訊</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">車款</label>
                    <input type="text" class="input-field" name="car-model" placeholder="例如：豐田 Corolla" required>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">車型</label>
                    <select class="input-field" name="car-type" required>
                      <option value="">請選擇車型</option>
                      <option value="sedan">轎車</option>
                      <option value="hatchback">掀背車</option>
                      <option value="suv">休旅車</option>
                      <option value="mpv">MPV</option>
                      <option value="other">其他</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">出廠年份</label>
                    <input type="number" class="input-field" name="car-year" placeholder="例如：2020" min="1990" max="2025" required>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-2">車輛外觀照片上傳</label>
                    <label class="file-upload">
                      <input type="file" class="hidden" name="car-photo" accept="image/*" required>
                      <div>
                        <p class="text-gray-600 mb-1">點擊或拖動文件到這裡上傳</p>
                        <p class="text-gray-400 text-xs">請拍攝清晰的車輛外觀照片，支援 JPG、PNG 格式</p>
                      </div>
                    </label>
                  </div>
                </div>
              </div>
              
              <!-- 保險與證件 -->
              <div>
                <h3 class="text-lg font-semibold mb-4 text-gray-800">保險與證件</h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-2">是否有購買產險？(至少要有乘客險)</label>
                    <div class="radio-group">
                      <label class="radio-label">
                        <input type="radio" name="insurance" value="yes" class="text-primary focus:ring-primary" required>
                        <span>有</span>
                      </label>
                      <label class="radio-label">
                        <input type="radio" name="insurance" value="no" class="text-primary focus:ring-primary">
                        <span>無</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-2">駕照照片上傳</label>
                    <label class="file-upload">
                      <input type="file" class="hidden" name="driver-license" accept="image/*" required>
                      <div>
                        <p class="text-gray-600 mb-1">點擊或拖動文件到這裡上傳</p>
                        <p class="text-gray-400 text-xs">請拍攝清晰的駕照正反面照片，支援 JPG、PNG 格式</p>
                      </div>
                    </label>
                  </div>
                </div>
              </div>
              
              <!-- 密碼設置 -->
              <div>
                <div class="space-y-4">
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">設定密碼</label>
                    <input type="password" class="input-field" name="driver-password" placeholder="設定密碼（至少8位）" minlength="8" required>
                  </div>
                  <div>
                    <label class="block text-left text-sm font-medium text-gray-700 mb-1">確認密碼</label>
                    <input type="password" class="input-field" name="driver-password-confirm" placeholder="再次輸入密碼" minlength="8" required>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mb-4">
              <label class="flex items-start space-x-2 text-sm text-gray-600">
                <input type="checkbox" class="mt-1 text-primary focus:ring-primary" required>
                <span>我已閱讀並同意<a href="#" class="text-primary hover:underline">服務條款</a>、<a href="#" class="text-primary hover:underline">隱私政策</a>及<a href="#" class="text-primary hover:underline">司機規章</a></span>
              </label>
            </div>
            
            <button type="submit" class="btn-primary w-full">提交註冊申請</button>
          </form>
        </div>
        
        <div class="mt-6 text-center">
          <p class="text-gray-600">註冊申請提交後，我們將在3個工作天內進行審核</p>
          <p class="text-gray-500 text-sm mt-2">審核通過後將以簡訊通知您，敬請耐心等候</p>
        </div>
      </div>
    </section>
  </main>

  <!-- 頁腳 -->
  <footer class="bg-white border-t border-gray-200 py-6">
    <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
      <p>© 2025 搭車自由 LIFF 應用 | 透過 LINE Developer 平台提供服務</p>
      <div class="mt-2 flex justify-center space-x-4">
        <a href="#" class="hover:text-primary transition-colors">關於我們</a>
        <a href="#" class="hover:text-primary transition-colors">服務條款</a>
        <a href="#" class="hover:text-primary transition-colors">聯絡我們</a>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // 移動菜單切換
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
    
    // 司機登錄/註冊標籤切換
    const loginTab = document.getElementById('driver-login-tab');
    const registerTab = document.getElementById('driver-register-tab');
    const loginForm = document.getElementById('driver-login-form');
    const registerForm = document.getElementById('driver-register-form');
    
    loginTab.addEventListener('click', () => {
      loginForm.classList.remove('hidden');
      registerForm.classList.add('hidden');
      
      loginTab.classList.add('text-primary', 'font-medium', 'border-b-2', 'border-primary');
      loginTab.classList.remove('text-gray-500');
      
      registerTab.classList.remove('text-primary', 'font-medium', 'border-b-2', 'border-primary');
      registerTab.classList.add('text-gray-500');
    });
    
    registerTab.addEventListener('click', () => {
      loginForm.classList.add('hidden');
      registerForm.classList.remove('hidden');
      
      registerTab.classList.add('text-primary', 'font-medium', 'border-b-2', 'border-primary');
      registerTab.classList.remove('text-gray-500');
      
      loginTab.classList.remove('text-primary', 'font-medium', 'border-b-2', 'border-primary');
      loginTab.classList.add('text-gray-500');
    });
    
    // 司機註冊表單 - 經驗選擇邏輯
    const experienceRadios = document.querySelectorAll('input[name="driving-experience"]');
    const fleetHistoryContainer = document.getElementById('fleet-history-container');
    
    experienceRadios.forEach(radio => {
      radio.addEventListener('change', () => {
        if (radio.value === 'yes') {
          fleetHistoryContainer.classList.remove('hidden');
          fleetHistoryContainer.querySelector('textarea').required = true;
        } else {
          fleetHistoryContainer.classList.add('hidden');
          fleetHistoryContainer.querySelector('textarea').required = false;
        }
      });
    });
    
    // 文件上傳預覽功能
    const fileInputs = document.querySelectorAll('input[type="file"]');
    fileInputs.forEach(input => {
      input.addEventListener('change', function() {
        if (this.files && this.files[0]) {
          const fileName = this.files[0].name;
          const uploadLabel = this.closest('.file-upload');
          if (uploadLabel) {
            uploadLabel.classList.add('border-primary');
          }
        }
      });
    });
    
    // 核心修正：註冊表單提交後跳轉到 driver/driver-audit.html
    const driverRegisterForm = document.getElementById('driver-register-form');
    if (driverRegisterForm) {
      driverRegisterForm.addEventListener('submit', function(e) {
        e.preventDefault(); // 阻止默認提交
        
        // 1. 密碼驗證
        const password = this.querySelector('input[name="driver-password"]').value;
        const passwordConfirm = this.querySelector('input[name="driver-password-confirm"]').value;
        if (password !== passwordConfirm) {
          alert('兩次輸入的密碼不一致！');
          return;
        }

        // 2. 跳過文件驗證（測試階段可先關閉，正式環境再開啟）
        // const requiredFiles = ['good-citizen-doc', 'car-photo', 'driver-license'];
        // let allFilesUploaded = true;
        // requiredFiles.forEach(fileName => {
        //   const fileInput = this.querySelector(`input[name="${fileName}"]`);
        //   if (!fileInput.files || fileInput.files.length === 0) {
        //     allFilesUploaded = false;
        //   }
        // });
        // if (!allFilesUploaded) {
        //   alert('請上傳所有必填文件！');
        //   return;
        // }
        
        // 3. 跳轉到 driver/driver-audit.html（修改後的路徑）
        console.log('表單驗證通過，跳轉到審核頁面...');
        window.location.href = 'driver/driver-audit.html';
        // 備用方案（防止第一種方式失效）
        setTimeout(() => {
          window.location.replace('driver/driver-audit.html');
        }, 100);
      });
    }
  </script>
</body>
</html>